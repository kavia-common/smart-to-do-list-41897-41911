{"is_source_file": true, "format": "TypeScript", "description": "This file defines a TypeScript module that provides an API interface for task management, supporting both backend server communication and localStorage fallback. It includes functions for listing, creating, updating, deleting, and clearing tasks, with conditional logic based on environment configuration.", "external_files": ["./http", "@/utils/env", "@/types/task"], "external_methods": ["httpDelete", "httpGet", "httpPatch", "httpPost", "isBackendEnabled"], "published": ["TasksApi"], "classes": [], "methods": [{"name": "list", "description": "Fetches the list of tasks, either from backend API or localStorage depending on environment configuration."}, {"name": "create", "description": "Creates a new task, either via backend API or localStorage fallback, generating a unique ID if needed."}, {"name": "update", "description": "Updates an existing task by ID via backend API or localStorage."}, {"name": "remove", "description": "Deletes a task by ID via backend API or localStorage."}, {"name": "clearCompleted", "description": "Deletes all completed tasks, attempting server-side deletion or falling back to client-side filtering."}, {"name": "function readLocal(): Task[] { readLocal", "description": "Reads tasks from localStorage, parsing JSON and ensuring array structure.", "scope": "", "scopeKind": ""}, {"name": "function writeLocal(tasks: Task[]) { writeLocal", "description": "Writes the list of tasks to localStorage as a JSON string.", "scope": "", "scopeKind": ""}], "calls": ["httpGet('/tasks')", "httpPost<Task>('/tasks', payload)", "httpPatch<Task>(`/tasks/${id}`, payload)", "httpDelete<void>(`/tasks/${id}`)", "httpDelete<Task[]>('/tasks?completed=true')", "localStorage.getItem(STORAGE_KEY)", "localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks))"], "search-terms": ["tasks.api.ts", "TasksApi", "localStorage fallback", "enable backend", "task management", "TaskCreate", "TaskUpdate", "backend API endpoints"], "state": 2, "file_id": 22, "knowledge_revision": 62, "git_revision": "", "revision_history": [{"54": ""}, {"60": ""}, {"61": ""}, {"62": ""}], "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^const STORAGE_KEY = 'todo.tasks.v1'$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "TasksApi", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^export const TasksApi = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "const", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const next = [task, ...tasks]$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const id = isCryptoAvailable$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const idx = tasks.findIndex((t) => t.id === id)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const updated: Task = { ...tasks[idx], ...payload, updatedAt: Date.now() }$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^  async list(): Promise<Task[]> {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const next = [...tasks]$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const next = [task, ...tasks]$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const parsed = JSON.parse(raw) as unknown$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const raw = localStorage.getItem(STORAGE_KEY)$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "readLocal", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^function readLocal(): Task[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "remaining", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^        const remaining = tasks.filter((t) => !t.completed)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "remaining", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const remaining = readLocal().filter((t) => !t.completed)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^        const result = await httpDelete<Task[]>('\\/tasks?completed=true')$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "task", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const task: Task = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "tasks", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^        const tasks = await httpGet<Task[]>('\\/tasks')$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "tasks", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const tasks = readLocal()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "tasks", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const tasks = readLocal().filter((t) => t.id !== id)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^      title: payload.title.trim(),$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const updated: Task = { ...tasks[idx], ...payload, updatedAt: Date.now() }$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^    const updated: Task = { ...tasks[idx], ...payload, updatedAt: Date.now() }$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "writeLocal", "path": "/home/kavia/workspace/code-generation/smart-to-do-list-41897-41911/frontend_vue/src/services/tasks.api.ts", "pattern": "/^function writeLocal(tasks: Task[]) {$/", "language": "TypeScript", "kind": "function"}], "hash": "a1967c1316bd3abc4919520b2fa86f9a", "format-version": 4, "code-base-name": "frontend_vue", "filename": "frontend_vue/src/services/tasks.api.ts"}